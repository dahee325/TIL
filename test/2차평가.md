# Hadoop
### 1.5.1 관계형 데이터베이스 관리 시스템(RDBMS)
- 탐색 : 데이터를 읽거나 쓸 때 디스크의 헤더를 디스크의 특정 위치로 이동시키는 조작
- B-트리 : 관계형 데이터베이스에서 사용되는 자료구조, 탐색을 수행하는 속도에 제한
    - Sort/Merge 사용
- 상대적으로 작은 양의 데이터를 낮은 지연 시간에 추출하고 변경하기 위해 데이터셋을 색인\
    ⇒ 특정 쿼리와 데이터 변경에 적합
- 지속적으로 변경되는 데이터셋에 적합 ⇒ 여러 번 읽고 쓰기
- 하둡과 RDBMS의 차이점 : 데이터셋 내부에서 처리되는 구조의 양
    - 정형 데이터 : 형식이 정의된 항목으로 구조화
    - 반정형 데이터 : 구조에 대한 최소한의 규칙만 있으면 됨
    - 비정형 데이터 : 어떠한 내부 구조가 없음 ex.일반 텍스트, 이미지
- **정규화** ⇒ 무결성 유지, 중복 제거

## 맵리듀스
### 2.3.1 맵과 리듀스
- RDBMS 보완
- 일괄 처리 방식으로 전체 데이터셋을 분석할 필요가 있는 문제에 적합
- 데이터를 한번 쓰고 여러 번 읽기
- 각 단계(맵, 리듀스)는 입력과 출력으로 키-값의 쌍을 가짐
- Map
    - 잘못된 레코드 거르기 ⇒ 값이 누락되거나 이상하거나 문제있는 레코드 제거
- Reduce
    - 리스트 전체를 반복하여 최고 측정값 추출

## 하둡 분산 파일 시스템
### 3.1 HDFS 설계
- 범용 하드웨어로 구성된 클러스터에서 실행되고 스트리밍 방식의 데이터 접근 패턴으로 대용량 파일을 다룰 수 있도록 설계된 파일 시스템
- 특성
    - 매우 큰 파일
    - 스트리밍 방식의 데이터 접근
    - 범용 하드웨어 → 장애가 발생하더라고 사용자가 장애가 발생했다는 사실조차 모르게 작업 수행하도록 설계
- 잘 안맞는 분야
    - 빠른 데이터 응답 시간
    - 수많은 작은 파일
    - 다중 라이터와 파일의 임의 수정

### 3.2.1 블록
- 블록 크기 : 한 번에 읽고 쓸 수 있는 데이터의 최대량
- 단일 디스크를 위한 파일 시스템은 디스크 블록 크기의 정배수인 파일시스템 블록 단위로 데이터를 다룸
- HDFS 블록
    - 기본 크기 : 128MB → 디스크 드라이브의 전송 속도가 향상될 때마다 계속 증가
    - 탐색 비용을 최소화 하기 위해서 디스크 블록에 비해 상당히 큼
    - 특정 블록 크기의 청크로 쪼개지고 각 청크는 독립적으로 저장
- HDFS 블록이 큰 이유
    - 탐색 비용 최소화
    - 블록의 시작점을 탐색하는 데 걸리는 시간 줄일 수 있음
    - 데이터를 전송하는 데 더 많은 시간 할애 가능
- 블록 추상화
    - 파일 하나의 크기가 단일 디스크의 용량보다 더 커질 수 있음
    - 스토리지의 서브시스템을 단순하게 만들 수 있음
    - 내고장성과 가용성을 제공하는데 필요한 복제를 구현할 때 매우 적합

## 하이브
### 17.4.1 읽기 스키마와 쓰기 스키마 비교
- 읽기 스키마
    - 쿼리를 실행할 때 데이터 검증 → 하이브
    - 데이터를 읽거나 파싱하거나 디스크에 직렬화할 필요가 없음 → 매우 빠른 속도로 데이터 로드, 단순히 파일 복사 or 이동
- 쓰기 스키마
    - 데이터를 쓰는 시점에 데이터 검증 → 전통적 데이터베이스
        
        ⇒ 로드중인 데이터가 스키마에 부합되지 않으면 해당 데이터 거부
        
    - 데이터베이스가 컬럼 단위의 데이터 색인과 압축을 제공 → 더 빠르게 쿼리 수행, 로드하는데 오래걸림
- 서로 상충관계

## Hbase
### 20.2.1 HBase → 데이터 모델 둘러보기
- 애플리케이션 : 테이블에 데이터 저장
- 테이블 : 로우와 컬럼으로 이루어짐 → 로우는 바이트 순서로 정렬
- 테이블 셀(로우와 컬럼의 교차점) : 버전별로 관리
    - 버전 : 셀이 생성되거나 갱신될 때마다 HBase가 자동으로 할당하는 타임스탬프
    - 셀의 내용은 바이트 배열
- 컬럼패밀리 : 로우의 컬럼들 → 공통 접두사를 가짐
    - 출력 가능한 문자로 이루어져야함
    - 컬럼패밀리`:`식별값
    - info:format, info:geo는 모두 info 컬럼 패밀리의 멤버
    - contents:image는 contents 컬럼 패밀리에 속함
    - 컬럼이 속할 컬럼 패밀리가 미리 존재하면 언제든지 컬럼 추가 가능
    - 모든 컬럼 패밀리 멤버는 파일시스템에 함께 저장
- 리전
    - HBase 클러스터에 분산되는 단위
    - Hbase는 테이블을 자동으로 리전 단위로 수평 분할 → 각 리전은 테이블 로우의 부분집합으로 구성
    - 자신이 속한 테이블, 첫번째 로우(포함), 마지막 로우(제외)로 구성
    - 테이블이 커지면서 리전의 개수도 증가